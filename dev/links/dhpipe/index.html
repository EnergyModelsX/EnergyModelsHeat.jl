<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>DHPipe · EnergyModelsHeat</title><meta name="title" content="DHPipe · EnergyModelsHeat"/><meta property="og:title" content="DHPipe · EnergyModelsHeat"/><meta property="twitter:title" content="DHPipe · EnergyModelsHeat"/><meta name="description" content="Documentation for EnergyModelsHeat."/><meta property="og:description" content="Documentation for EnergyModelsHeat."/><meta property="twitter:description" content="Documentation for EnergyModelsHeat."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EnergyModelsHeat</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/quick-start/">Quick Start</a></li><li><a class="tocitem" href="../../manual/simple-example/">Examples</a></li><li><a class="tocitem" href="../../manual/NEWS/">Release notes</a></li></ul></li><li><span class="tocitem">Resources</span><ul><li><a class="tocitem" href="../../resources/resourceheat/">ResourceHeat</a></li></ul></li><li><span class="tocitem">Links</span><ul><li class="is-active"><a class="tocitem" href>DHPipe</a><ul class="internal"><li><a class="tocitem" href="#links-DHPipe-fields"><span>Introduced type and its fields</span></a></li><li><a class="tocitem" href="#links-DHPipe-math"><span>Mathematical description</span></a></li></ul></li></ul></li><li><span class="tocitem">Nodes</span><ul><li><a class="tocitem" href="../../nodes/heatpump/">HeatPump</a></li><li><a class="tocitem" href="../../nodes/thermalenergystorage/">ThermalEnergyStorage</a></li><li><a class="tocitem" href="../../nodes/heatexchanger/">HeatExchanger</a></li></ul></li><li><span class="tocitem">How to</span><ul><li><a class="tocitem" href="../../howto/simple_conversion/">Use surplus heat for DH</a></li><li><a class="tocitem" href="../../howto/contribute/">Contribute to EnergyModelsHeat</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../../library/public/">Public</a></li><li><input class="collapse-toggle" id="menuitem-7-2" type="checkbox"/><label class="tocitem" for="menuitem-7-2"><span class="docs-label">Internals</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../library/internals/types-EMH/">Types</a></li><li><a class="tocitem" href="../../library/internals/methods-fields/">Methods - Accessing fields</a></li><li><a class="tocitem" href="../../library/internals/methods-EMH/">Methods - <code>EnergyModelsHeat</code></a></li><li><a class="tocitem" href="../../library/internals/methods-EMB/">Methods - <code>EnergyModelsBase</code></a></li></ul></li></ul></li><li><span class="tocitem">Background</span><ul><li><a class="tocitem" href="../../background/background/">Heat exchanger</a></li><li><a class="tocitem" href="../../background/bio_chp/">Bio CHP</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Links</a></li><li class="is-active"><a href>DHPipe</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>DHPipe</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsHeat.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/EnergyModelsX/EnergyModelsHeat.jl/blob/main/docs/src/links/dhpipe.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="links-DHPipe"><a class="docs-heading-anchor" href="#links-DHPipe">DHPipe</a><a id="links-DHPipe-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe" title="Permalink"></a></h1><p><a href="../../library/public/#EnergyModelsHeat.DHPipe"><code>DHPipe</code></a> links model the transport of heat in the form of hot water or other fluid in heating networks. They model the flow of energy from a source to a sink, that is we do not model a water/fluid with a given temperature and pressure. The heat losses are calculated based on the supply temperature of the inflowing <a href="../../library/public/#EnergyModelsHeat.ResourceHeat"><code>ResourceHeat</code></a>, together with the ground temperature, pipe length, and a heat loss coefficient. Heat losses in the return flow are therefore ignored, following the approach from [<a href="../../background/background/#KVALSVIK2018">1</a>]. These heat losses are in general very small, and in any case much smaller than the losses in the supply pipes [<a href="../../background/background/#DALLAROSA2011">2</a>]. Losses in the return pipe can even be negative in twin pipes, as heat leaks from the supply to the return line. Pressure losses are also excluded in the current version of the model; however, pressure losses and the required pumping power are in general very small compared to the heat supply (see, <em>e.g.</em>, [<a href="../../background/background/#KAUKO2022">3</a>]).</p><h2 id="links-DHPipe-fields"><a class="docs-heading-anchor" href="#links-DHPipe-fields">Introduced type and its fields</a><a id="links-DHPipe-fields-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe-fields" title="Permalink"></a></h2><p><a href="../../library/public/#EnergyModelsHeat.DHPipe"><code>DHPipe</code></a> is implemented as equivalent to an abstract type <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/links/#EnergyModelsBase.Link"><code>Link</code></a>. Hence, it utilizes the same functions declared in <code>EnergyModelsBase</code>.</p><h3 id="links-DHPipe-fields-stand"><a class="docs-heading-anchor" href="#links-DHPipe-fields-stand">Standard fields</a><a id="links-DHPipe-fields-stand-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe-fields-stand" title="Permalink"></a></h3><p><a href="../../library/public/#EnergyModelsHeat.DHPipe"><code>DHPipe</code></a> has the following standard fields, equivalent to a <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/links/#EnergyModelsBase.Direct"><code>Direct</code></a> link:</p><ul><li><strong><code>id</code></strong> :<br/>The field <code>id</code> is only used for providing a name to the link.</li><li><strong><code>from::Node</code></strong> :<br/>The node from which there is flow into the link.</li><li><strong><code>to::Node</code></strong> :<br/>The node from which there is flow out of the link.</li><li><strong><code>formulation::Formulation</code></strong> :<br/>The used formulation of links. If not specified, a <code>Linear</code> link is assumed.<div class="admonition is-info" id="Different-formulations-719ba651b50fc420"><header class="admonition-header">Different formulations<a class="admonition-anchor" href="#Different-formulations-719ba651b50fc420" title="Permalink"></a></header><div class="admonition-body"><p>The current implementation of links does not provide another formulation. Our aim is in a later stage to allow the user to switch fast through different formulations to increase or decrese the complexity of the model.</p></div></div></li></ul><h3 id="links-DHPipe-fields-new"><a class="docs-heading-anchor" href="#links-DHPipe-fields-new">Additional fields</a><a id="links-DHPipe-fields-new-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe-fields-new" title="Permalink"></a></h3><p>The following additional fields are included for <a href="../../library/public/#EnergyModelsHeat.DHPipe"><code>DHPipe</code></a> links:</p><ul><li><strong><code>cap::TimeProfile</code></strong> :<br/>The maximum heat transport capacity of the pipe. The value should be higer than the expected maximum heat demand for the load the given pipe segment is delivering heat to. If the link should contain investments through the application of <a href="https://energymodelsx.github.io/EnergyModelsInvestments.jl/"><code>EnergyModelsInvestments</code></a>, it is important to note that you can only use <code>FixedProfile</code> or <code>StrategicProfile</code> for the capacity, but not <code>RepresentativeProfile</code> or <code>OperationalProfile</code>. In addition, all values have to be non-negative.</li><li><strong><code>pipe_length::Float64</code></strong> :<br/>The pipe length. The unit for the pipe length is directly related to the field <code>pipe_loss_factor</code>. It is hence advised to utilize, <em>e.g.</em> m as length unit for both.</li><li><strong><code>pipe_loss_factor::Float64</code></strong> :<br/>The heat loss factor from the fluid to the ground per meter pipe given in [W/(m K)], [kW/(m K)] or [MW/(m K)], depending on the applied unit for energy. Typical values for heat loss coefficient (<span>$\lambda$</span>) for the insulation in district heating pipes can be found at the website of the DH pipe manufacturer <a href="https://www.logstor.com/district-heating/logstor-lab/lambda-values">LOGSTOR</a>. The <code>pipe_loss_factor</code> applied in <a href="../../library/public/#EnergyModelsHeat.DHPipe"><code>DHPipe</code></a> is however an overall loss factor considering not just the insulation, but also the pipe geometry (see [<a href="../../background/background/#KVALSVIK2018">1</a>]). This loss factor is typically a factor of ten or more higher than the <span>$\lambda$</span>-values given in <a href="https://www.logstor.com/district-heating/logstor-lab/lambda-values">LOGSTOR</a>.</li><li><strong><code>t_ground::TimeProfile</code></strong> :<br/>The ground temperature in °C. The gound temperature can be approximated with the ambient temperature.</li><li><strong><code>resource_heat::ResourceHeat</code></strong> :<br/>The resource used by DHPipe, which has to be of type <a href="../../library/public/#EnergyModelsHeat.ResourceHeat"><code>ResourceHeat</code></a> and must be equal to a resource flowing out of a <code>to::Node</code> and into a <code>from::Node</code>. <a href="../../library/public/#EnergyModelsHeat.ResourceHeat"><code>ResourceHeat</code></a> contains the supply and (optionally) return temperature applied in the district heating network. The supply temperature is used in the calculation of the heat losses.</li><li><strong><code>data::Vector{&lt;:ExtensionData}</code></strong>:<br/>An entry for providing additional data to the model. In the current version, it is used for providing additional investment data when <a href="https://energymodelsx.github.io/EnergyModelsInvestments.jl/"><code>EnergyModelsInvestments</code></a> is used.<div class="admonition is-info" id="Constructor-for-DHPipe-ad0bd1fa9bce41c3"><header class="admonition-header">Constructor for `DHPipe`<a class="admonition-anchor" href="#Constructor-for-DHPipe-ad0bd1fa9bce41c3" title="Permalink"></a></header><div class="admonition-body"><p>The field <code>data</code> is not required as we include a constructor when the value is excluded.</p></div></div></li></ul><h2 id="links-DHPipe-math"><a class="docs-heading-anchor" href="#links-DHPipe-math">Mathematical description</a><a id="links-DHPipe-math-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe-math" title="Permalink"></a></h2><p>In the following mathematical equations, we use the name for variables and functions used in the model. Variables are in general represented as</p><p><span>$\texttt{var\_example}[index_1, index_2]$</span></p><p>with square brackets, while functions are represented as</p><p><span>$func\_example(index_1, index_2)$</span></p><p>with paranthesis.</p><h3 id="links-DHPipe-math-var"><a class="docs-heading-anchor" href="#links-DHPipe-math-var">Variables</a><a id="links-DHPipe-math-var-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe-math-var" title="Permalink"></a></h3><h4 id="links-DHPipe-math-var-stand"><a class="docs-heading-anchor" href="#links-DHPipe-math-var-stand">Standard variables</a><a id="links-DHPipe-math-var-stand-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe-math-var-stand" title="Permalink"></a></h4><p><a href="../../library/public/#EnergyModelsHeat.DHPipe"><code>DHPipe</code></a> utilizes standard variables from the <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/links/#EnergyModelsBase.Link"><code>Link</code></a> type, as described on the page <em><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var">Optimization variables</a></em>. The variables include:</p><ul><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-flow"><span>$\texttt{link\_in}$</span></a></li><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-flow"><span>$\texttt{link\_out}$</span></a></li></ul><p>Both variable sets only include the specified <code>resource_heat</code> as resource through new methods for <a href="../../library/internals/methods-EMB/#EnergyModelsBase.inputs"><code>inputs</code></a> and <a href="../../library/internals/methods-EMB/#EnergyModelsBase.outputs"><code>outputs</code></a>.</p><p>In addition, <a href="../../library/public/#EnergyModelsHeat.DHPipe"><code>DHPipe</code></a> utilizes one of conditional variables for links:</p><ul><li><a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/manual/optimization-variables/#man-opt_var-cap"><span>$\texttt{link\_cap\_inst}$</span></a></li></ul><h4 id="links-DHPipe-math-add"><a class="docs-heading-anchor" href="#links-DHPipe-math-add">Additional variables</a><a id="links-DHPipe-math-add-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe-math-add" title="Permalink"></a></h4><p>It is an advantage to keep track of the heat losses in <a href="../../library/public/#EnergyModelsHeat.DHPipe"><code>DHPipe</code></a>. Hence, an additional variable is declared for heat loss through creating a new method for the function <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/functions/#EnergyModelsBase.variables_link"><code>variables_link</code></a>:</p><ul><li><span>$\texttt{dh\_pipe\_loss}[l, t]$</span>: Heat loss in pipe segment <span>$l$</span> in operational period <span>$t$</span> with a typical unit of MW.<br/></li></ul><p>It is assumed that the heat loss is constant, <em>i.e.</em>, independent of the amount of heat transported by the pipe. Heat losses thus depend only on the pipe length, the supply and ground temperatures and the <code>pipe_loss_factor</code>, as shown by the constraint functions below. This implies also that there is a heat loss even if there is no heat flowing through the pipe, but the water is standing still, which is the case also in practice.</p><p>It is advisable to check that the resulting relative heat loss is within an appropriate range (considering the size of the network and the supply temperature), and adjust the &#39;pipe<em>loss</em>factor&#39; if needed. Typical heat losses relative to the total heat demand are in the range 10-20 % for city-wide district heating networks, which can have a total length up to hundreds of kilometers; and 3-5 % for local DH networks, with a typical length of a few kilometers.</p><h3 id="links-DHPipe-math-con"><a class="docs-heading-anchor" href="#links-DHPipe-math-con">Constraints</a><a id="links-DHPipe-math-con-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe-math-con" title="Permalink"></a></h3><p>The constraint functions are called within the function <a href="../../library/internals/methods-EMB/#EnergyModelsBase.create_link"><code>create_link</code></a>. This includes both a standard constraint for <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/public/links/#EnergyModelsBase.Link"><code>Link</code></a> and constraints related to the calculation of heat losses, given in the following.</p><p>The following sections omit the direct inclusion of the vector of district heating pipes. Instead, it is implicitly assumed that the constraints are valid <span>$\forall l ∈ L^{DHPipe}$</span> for all <a href="../../library/public/#EnergyModelsHeat.DHPipe"><code>DHPipe</code></a> types if not stated differently. In addition, all constraints are valid <span>$\forall t \in T$</span> (that is in all operational periods) or <span>$\forall t_{inv} \in T^{Inv}$</span> (that is in all strategic periods).</p><h4 id="links-DHPipe-math-con-stand"><a class="docs-heading-anchor" href="#links-DHPipe-math-con-stand">Standard constraints</a><a id="links-DHPipe-math-con-stand-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe-math-con-stand" title="Permalink"></a></h4><p>The applied standard constraint is <code>constraints_capacity_installed</code>:</p><p class="math-container">\[\texttt{link\_cap\_inst}[l, t] = capacity(l, t)\]</p><h4 id="links-DHPipe-math-con-add"><a class="docs-heading-anchor" href="#links-DHPipe-math-con-add">Additional constraints</a><a id="links-DHPipe-math-con-add-1"></a><a class="docs-heading-anchor-permalink" href="#links-DHPipe-math-con-add" title="Permalink"></a></h4><p>All additional constraints are created within a new method for the function <a href="https://energymodelsx.github.io/EnergyModelsBase.jl/stable/library/internals/functions/#EnergyModelsBase.create_link"><code>create_link</code></a>.</p><p>The calculation of the heat losses is included through the relationship between the flow into and out from the link</p><p class="math-container">\[\texttt{flow\_out}[l, t, resource\_heat(l)] = \texttt{flow\_in}[l, t, resource\_heat(l)] - \texttt{dh\_pipe\_loss}[l, t]\]</p><p>as well as the direct loss</p><p class="math-container">\[\texttt{dh\_pipe\_loss}[l, t] = pipe\_length(l) \times pipe\_loss\_factor(l) \times (t_{supply}(l) - t_{ground}(l))\]</p><p>In addition, the heat energy flowing in to the pipe should not exceed the maximum pipe capacity, which is included through the following constraint:</p><p class="math-container">\[\texttt{flow\_in}[l, t, resource\_heat(l)] \leq \texttt{link\_cap\_inst}[l, t]\]</p><div class="admonition is-warning" id="Heat-loss-2d66ca8d94fa3678"><header class="admonition-header">Heat loss<a class="admonition-anchor" href="#Heat-loss-2d66ca8d94fa3678" title="Permalink"></a></header><div class="admonition-body"><p>To make sure that the amount of heat flowing out of the pipe does not become negative, the heat losses occurring in the pipe should not be higher than the amount of heat entering the pipe, <em>i.e.</em>:</p><p class="math-container">\[\texttt{flow\_in}[l, t, resource\_heat(l)] &gt; \texttt{dh\_pipe\_loss}[l, t]\]</p></div></div><script type="module">import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
mermaid.initialize({
    startOnLoad: true,
    theme: "neutral"
});
</script></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../resources/resourceheat/">« ResourceHeat</a><a class="docs-footer-nextpage" href="../../nodes/heatpump/">HeatPump »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Monday 20 October 2025 10:50">Monday 20 October 2025</span>. Using Julia version 1.12.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
